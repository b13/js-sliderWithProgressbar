/*! js-sliderWithProgressbar - v0.1.0 - 2015-09-16
* Copyright (c) 2015 Daniel Sattler @ b:dreizehn Licensed MIT */
define(["jquery","slick-carousel"],function(a){return function(b,c,d,e){function f(){return k.$slider=b.find(k.slideSelector).slick(a.extend(k.sliderOptions,{asNavFor:b.find(k.previewSlideSelector)})),k.$previewSlider=b.find(k.previewSlideSelector).slick(a.extend(k.previewSliderOptions,{asNavFor:b.find(k.slideSelector)})),g(k.$slider[0].slick.slickCurrentSlide()),k.$slider.on("beforeChange",function(a,b,c,d){g(d),j=d}),i}function g(b){var c=k.$slider.find('[data-slick-index="'+b+'"]'),d=k.$previewSlider.find('[data-slick-index="'+b+'"]'),e=k.$previewSlider.find('[data-slick-index="'+b+'"]').find(k.progressbarSelector);h(b),d.data("customprogressbar")?a.isFunction(k.onCustomProgressbar)&&k.onCustomProgressbar(c,e,i):i.startProgressbarAnimation(b)}function h(a){var b=k.$previewSlider.find('[data-slick-index="'+a+'"]');b.addClass(k.paginationActiveClassName).siblings().removeClass(k.paginationActiveClassName),k.$previewSlider.find(k.progressbarSelector).css("width","0%")}var i=this,j=0,k=a.extend({progressbarSelector:".bJS_progressbar",slideSelector:".bJS_slider",previewSlideSelector:".bJS_previewSlider",$slider:{},$previewSlider:{},progressInterval:"",onCustomProgressbar:null,paginationActiveClassName:"active"},c);return k.sliderOptions=a.extend({slidesToShow:1,slidesToScroll:1,arrows:!1,fade:!0,autoplay:!0},d),k.previewSliderOptions=a.extend({slidesToShow:3,slidesToScroll:1,dots:!1,focusOnSelect:!0,centerMode:!0},e),i.startProgressbarAnimation=function(a){var b=0,c=k.$previewSlider.find('[data-slick-index="'+a+'"]').find(k.progressbarSelector),d=k.$slider[0].slick.slickGetOption("autoplaySpeed");clearInterval(k.progressInterval),k.progressInterval=setInterval(function(){100>=b?(b++,c.css({width:b+"%"})):clearInterval(k.progressInterval)},d/100)},i.stop=function(){clearInterval(k.progressInterval),k.$slider[0].slick.slickPause()},i.start=function(a){h(a?a:j),k.$slider[0].slick.slickPlay()},i.getSlick=function(){return k.$slider[0].slick},f()}});